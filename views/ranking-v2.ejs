<div class="container mt-4">

  <% 
    // ğŸ”¹ Î‘Î½Î¬Î»Î¿Î³Î± Î¼Îµ Ï„Î¿ title Ï€Î¿Ï… Î®ÏÎ¸Îµ Î±Ï€ÏŒ Ï„Î¿ route, Î±Î»Î»Î¬Î¶Î¿Ï…Î¼Îµ ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·
    const isKumite = title.toLowerCase().includes("kumite");
    const isKata = title.toLowerCase().includes("kata");
  %>

  <h2 class="mb-4 text-center">
    <% if (isKumite) { %>
      ğŸ¥‹ <span class="text-danger">KUMITE</span> Ranking
    <% } else if (isKata) { %>
      ğŸ§˜ <span class="text-primary">KATA</span> Ranking
    <% } else { %>
      ğŸ† General Ranking
    <% } %>
  </h2>

  <!-- ğŸ” Search form -->
  <form method="GET" class="row mb-3">
    <div class="col-md-4">
      <input type="text" name="search" class="form-control" placeholder="Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ· Î±Î¸Î»Î·Ï„Î®...">
    </div>
    <div class="col-md-2">
      <button class="btn btn-dark w-100">ğŸ” Î‘Î½Î±Î¶Î®Ï„Î·ÏƒÎ·</button>
    </div>
    <div class="col-md-2">
      <a href="<%= isKumite ? '/ranking/kumite' : isKata ? '/ranking/kata' : '/ranking' %>" class="btn btn-secondary w-100">âœ–ï¸ ÎšÎ±Î¸Î±ÏÎ¹ÏƒÎ¼ÏŒÏ‚</a>
    </div>
  </form>

  <% if (rows && rows.length > 0) { %>
    <table class="table table-striped table-bordered table-hover align-middle">
      <thead class="table-dark text-center">
        <tr>
          <th>#</th>
          <th>Full Name</th>
          <th>Gender</th>
          <th>Age Category</th>
          <th>Weight Category</th>
          <th>Total Points</th>
        </tr>
      </thead>
      <tbody>
        <% rows.forEach((r, index) => { %>
          <tr class="text-center">
            <td><%= index + 1 %></td>
            <td class="text-start fw-bold"><%= r.full_name %></td>
            <td><%= r.gender || '-' %></td>
            <td><%= r.age_category || '-' %></td>
            <td><%= r.weight_category || '-' %></td>
            <td class="fw-bold text-success"><%= r.total_points || 0 %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } else { %>
    <div class="alert alert-info text-center">
      Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î± Î³Î¹Î± Î±Ï…Ï„Î®Î½ Ï„Î·Î½ ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±.
    </div>
  <% } %>

  <div class="mt-4 text-center">
    <a href="/ranking/kumite" class="btn btn-outline-danger me-2">ğŸ¥‹ KUMITE</a>
    <a href="/ranking/kata" class="btn btn-outline-primary">ğŸ§˜ KATA</a>
  </div>

</div>
