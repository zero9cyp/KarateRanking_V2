<div class="container mt-4">
  <h1 class="mb-4">üèÖ Full Athlete Management</h1>

  <div class="table-responsive">
    <table class="table table-bordered table-striped align-middle">
      <thead class="table-dark">
        <div class="table-responsive">
  <table class="table table-bordered table-striped align-middle" style="table-layout: auto; width:100%;">
    <colgroup>
      <col style="width: 3%;">
      <col style="width: 20%;">  <!-- üëà wider name column -->
      <col style="width: 10%;">
      <col style="width: 7%;">
      <col style="width: 10%;">
      <col style="width: 10%;">
      <col style="width: 15%;">
      <col style="width: 7%;">
      <col style="width: 10%;">
      <col style="width: 8%;">
    </colgroup>

        <tr>
          <th>ID</th>
          <th>Full Name</th>
          <th>Birth Date</th>
          <th>Gender</th>
          <th>Age Cat</th>
          <th>Weight Cat</th>
          <th>Club</th>
          <th>Total Points</th>
          <th>Save / Results</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <% athletes.forEach(a => { %>
          <tr>
            <!-- Update form -->
            <form action="/editor/update" method="POST">
              <input type="hidden" name="id" value="<%= a.id %>">
              <td><%= a.id %></td>
              <td><input name="full_name" class="form-control" value="<%= a.full_name %>"></td>
              <td><input type="date" name="birth_date" class="form-control" value="<%= a.birth_date %>"></td>
              <td>
                <select name="gender" class="form-select">
                  <option value="male" <%= a.gender === 'male' ? 'selected' : '' %>>Male</option>
                  <option value="female" <%= a.gender === 'female' ? 'selected' : '' %>>Female</option>
                </select>
              </td>
              <td>
                <select name="age_category_id" class="form-select">
                  <option value="">-</option>
                  <% ages.forEach(cat => { %>
                    <option value="<%= cat.id %>" <%= a.age_category_id === cat.id ? 'selected' : '' %>><%= cat.name %></option>
                  <% }) %>
                </select>
              </td>
              <td>
                <select name="weight_category_id" class="form-select">
                  <option value="">-</option>
                  <% weights.forEach(w => { %>
                    <option value="<%= w.id %>" <%= a.weight_category_id === w.id ? 'selected' : '' %>><%= w.name %></option>
                  <% }) %>
                </select>
              </td>
              <td>
                <select name="club_id" class="form-select">
                  <option value="">-</option>
                  <% clubs.forEach(c => { %>
                    <option value="<%= c.id %>" <%= a.club_id === c.id ? 'selected' : '' %>><%= c.name %></option>
                  <% }) %>
                </select>
              </td>
              <td><input type="number" name="total_points" class="form-control" value="<%= a.total_points %>"></td>
              <td>
                <div class="d-flex gap-1">
                  <button type="submit" class="btn btn-success btn-sm">üíæ</button>
                  <a href="/editor/results/<%= a.id %>" class="btn btn-info btn-sm">üèÜ</a>
                </div>
              </td>
            </form>
            <td>
              <form action="/editor/delete/<%= a.id %>" method="POST" onsubmit="return confirm('Delete <%= a.full_name %>?')">
                <button type="submit" class="btn btn-danger btn-sm">üóë</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

