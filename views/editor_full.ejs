<div class="container mt-4">
  <h2 class="mb-3">🏋️‍♂️ Διαχείριση Αθλητών</h2>

  <form method="GET" class="row mb-3">
    <div class="col-md-4">
      <input type="text" name="search" class="form-control" placeholder="Αναζήτηση αθλητή...">
    </div>
    <div class="col-md-3">
      <select name="status" class="form-select">
        <option value="">Όλες οι καταστάσεις</option>
        <option value="pending" <%= filter==='pending'?'selected':'' %>>🕓 Pending</option>
        <option value="ok" <%= filter==='ok'?'selected':'' %>>✅ OK</option>
        <option value="issue" <%= filter==='issue'?'selected':'' %>>⚠️ Issue</option>
      </select>
    </div>
    <div class="col-md-2">
      <button class="btn btn-dark w-100">Φίλτρο</button>
    </div>
  </form>

  <table class="table table-striped table-bordered table-hover align-middle">
    <thead class="table-dark text-center">
      <tr>
        <th>#</th>
        <th>Όνομα</th>
        <th>Σύλλογος</th>
        <th>Κατηγορία Ηλικίας</th>
        <th>Κατηγορία Κιλών</th>
        <th>Πόντοι</th>
        <th>Κατάσταση</th>
        <th>Τελευταίος Έλεγχος</th>
        <th>Ενέργεια</th>
      </tr>
    </thead>
    <tbody>
      <% athletes.forEach((a, i) => { %>
        <tr class="text-center">
          <td><%= i + 1 %></td>
          <td class="text-start fw-bold"><%= a.full_name %></td>
          <td><%= a.club || '-' %></td>
          <td><%= a.age_category || '-' %></td>
          <td><%= a.weight_category || '-' %></td>
          <td class="fw-bold text-success"><%= a.total_points || 0 %></td>
          <td>
            <% if (a.review_status === 'ok') { %>
              <span class="badge bg-success">OK</span>
            <% } else if (a.review_status === 'issue') { %>
              <span class="badge bg-danger">Issue</span>
            <% } else { %>
              <span class="badge bg-warning text-dark">Pending</span>
            <% } %>
          </td>
          <td><%= a.last_reviewed_at || '—' %></td>
          <td>
            <a href="/editor/<%= a.id %>" class="btn btn-sm btn-primary">✏️ Edit</a>
            <form action="/editor/delete/<%= a.id %>" method="POST" style="display:inline">
              <button class="btn btn-sm btn-danger" onclick="return confirm('Διαγραφή;')">🗑️</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
