<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold text-primary">🏅 Athletes</h1>
    <a href="/athletes/add" class="btn btn-success shadow-sm">
      ➕ Add Athlete
    </a>
  </div>

  <form action="/athletes/search" method="get" class="d-flex mb-4">
    <input 
      type="text" 
      name="query" 
      class="form-control me-2" 
      placeholder="🔍 Search athletes..." 
      value="<%= searchQuery || '' %>"
    >
    <button type="submit" class="btn btn-outline-primary">Search</button>
  </form>

  <% if (athletes && athletes.length > 0) { %>
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover align-middle">
      <thead class="table-primary text-center">
        <tr>
          <th>ID</th>
          <th>Full Name</th>
          <th>Gender</th>
          <th>Age Category</th>
          <th>Weight Category</th>
          <th>Total Points</th>
          <th>Club</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% athletes.forEach(a => { %>
        <tr>
          <td class="text-center"><%= a.id %></td>
          <td><strong><%= a.full_name %></strong></td>
          <td class="text-center"><%= a.gender %></td>
          <td class="text-center"><%= a.age_category_name || '-' %></td>
          <td class="text-center"><%= a.weight_category_name || '-' %></td>
          <td class="text-center fw-semibold text-success"><%= a.total_points %></td>
          <td><%= a.club_name || '-' %></td>
          <td class="text-center">
            <div class="btn-group" role="group">
              <a href="/athletes/edit/<%= a.id %>" class="btn btn-sm btn-warning">✏️</a>
              <form action="/athletes/delete/<%= a.id %>" method="POST" style="display:inline;">
                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this athlete?');">🗑️</button>
              </form>
              <a href="/athletes/<%= a.id %>/history" class="btn btn-sm btn-info text-white">📈 History</a>
              <a href="/athletes/<%= a.id %>/tournaments" class="btn btn-sm btn-secondary">🥋 Tournaments</a>
            </div>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
  <% } else { %>
  <div class="alert alert-info shadow-sm text-center">No athletes found.</div>
  <% } %>
</div>
