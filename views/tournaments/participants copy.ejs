<div class="container mt-5">
  <h2 class="mb-4 text-center">🏆 Participants for <%= tournament.name %></h2>

  <% if (participants.length === 0) { %>
    <div class="alert alert-info text-center">No approved participants yet.</div>
  <% } else { %>
    <form action="/tournaments/<%= tournament.id %>/participants/delete-multi" method="POST" onsubmit="return confirm('Are you sure you want to delete selected participants?');">
      <table class="table table-striped table-hover shadow-sm">
        <thead class="table-dark">
          <tr>
            <th><input type="checkbox" id="selectAll"></th>
            <th>#</th>
            <th>Full Name</th>
            <th>Gender</th>
            <th>Age Category</th>
            <th>Weight Category</th>
            <th>Club</th>
          </tr>
        </thead>
        <tbody>
          <% participants.forEach((p, index) => { %>
          <tr>
            <td><input type="checkbox" name="registration_ids[]" value="<%= p.registration_id %>"></td>
            <td><%= index + 1 %></td>
            <td><%= p.full_name %></td>
            <td><%= p.gender %></td>
            <td><%= p.age_category || '—' %></td>
            <td><%= p.weight_category || '—' %></td>
            <td><%= p.club_name || '—' %></td>
          </tr>
          <% }) %>
        </tbody>
      </table>
      <div class="text-center mt-3">
        <button type="submit" class="btn btn-danger">Delete Selected</button>
        <a href="/tournaments" class="btn btn-secondary">← Back to Tournaments</a>
      </div>
    </form>
  <% } %>
</div>

<script>
  // Select / Deselect all checkboxes
  document.getElementById('selectAll').addEventListener('change', function() {
    const checkboxes = document.querySelectorAll('input[name="registration_ids[]"]');
    checkboxes.forEach(cb => cb.checked = this.checked);
  });
</script>
